cilium:
  enabled: true
  # --- General settings ---
  # todo: figure out how to get the service host here.
  k8sServiceHost: "172.18.0.2"
  k8sServicePort: "6443"
  kubeProxyReplacement: true
  hostServices:
    enabled: true
  externalIPs:
    enabled: true
  # --- Networking ---
  ipam:
    mode: kubernetes
  routingMode: tunnel
  tunnelProtocol: vxlan
  autoDirectNodeRoutes: false
  enableIPv4Masquerade: true
  enableIPv6Masquerade: false
  # --- Policy enforcement ---
  policyEnforcementMode: default
  # --- Hubble (observability) ---
  hubble:
    enabled: true
    metrics:
      enableOpenMetrics: true
      enabled:
        - "flow:sourceContext=identity;destinationContext=identity;trafficDirection"
        - "drop:sourceContext=identity;destinationContext=identity;trafficDirection"
        - "tcp:sourceContext=identity;destinationContext=identity;trafficDirection"
        - "dns:sourceContext=identity;destinationContext=identity;trafficDirection"
        - "icmp:sourceContext=identity;destinationContext=identity;trafficDirection"
    relay:
      enabled: true
    ui:
      enabled: true
  # --- KubeProxy replacement ---
  bpf:
    masquerade: true
    tproxy: true
    hostRouting: true
  # --- NodePort / Services ---
  enableNodePort: true
  enableHostPort: true
  nodePort:
    enableHealthCheck: true
